# GitHub Action Templates

This directory contains reference templates used by GitHub Actions for infrastructure validation.

## Files

### `base-stack-template.json`
Reference CloudFormation template for the base stack (shared infrastructure). This file is automatically generated and updated by the infrastructure validation workflow.

**Purpose**: 
- Detect changes to base stack infrastructure
- Prevent accidental deployment of base stack changes
- Ensure base stack changes go through proper PR process

**How it works**:
1. During PR validation, the current base stack template is synthesized
2. It's compared against this reference template
3. If changes are detected, the validation fails
4. Base stack changes must be deployed via develop/master branch PRs

**Maintenance**:
- File is automatically created on first run if missing
- Updated when base stack changes are approved and deployed
- Should not be manually edited unless absolutely necessary

## Base Stack Change Process

When base stack changes are detected:

1. **Validation Failure**: The infrastructure-pr.yml workflow will fail with clear error message
2. **Create PR**: Create a pull request to `develop` or `master` branch
3. **Review Process**: Base stack changes require careful review as they affect shared infrastructure
4. **Deployment**: Merge PR to deploy base stack changes via deployment workflow
5. **Template Update**: Reference template is automatically updated after successful deployment

## What Triggers Base Stack Changes

Changes to these components typically require base stack updates:

- VPC configuration
- Security groups  
- NAT gateways
- Internet gateways
- Route tables
- Shared IAM roles
- CloudWatch log groups for shared services
- Any EnvironmentBaseStack modifications

## Important Notes

- Base stack changes affect all applications in the environment
- Changes require careful coordination and testing
- Rolling back base stack changes can be complex
- Always test base stack changes in development environment first